---
layout: post
title:  "임베디드 시스템 정리"
---
#임베디드 시스템이란
- 어떤 제품 혹은 시스템에 포함된 컴퓨터
- 특수한 목적을 수행하기 위하여 개발된 하드웨어와 소프트웨어
- 일반 컴퓨터는 아니지만 마이크로프로세서를 가지고 있고 소프트웨어를 수행하는 특수 컴퓨터

#임베디드 시스템인 것
-휴대폰, MP3 플레이어, 미디어 플레이어, 포터블 게임기, PDA, 디지털 TV, 청소 로봇

#임베디드 시스템이 아닌 것
-데스크 탑 PC, 서버 컴퓨터, 수퍼 컴퓨터

#임베디드 시스템
-하드웨어 : 프로세서, 메모리 장치, 입출력 장치
-소프트웨어 : 운영체제, 시스템 소프트웨어, 응용 소프트웨어

-시스템이 복잡해짐에 따라 제한된 H/W를 이용하여 다양한 기능을 구현하기 위해서 S/W는 운영체제를 도입하게 되었다.

#임베디드 시스템의 소프트웨어 구조 – 운영체제가 있는 경우
-일반적인 PC에 윈도우나 리눅스 등의 운영체제를 갖고 있어서 하드웨어 제어를 운영체제가 담당하고 애플리케이션이 운영체제에 제어를 받는 구조. 복잡한 기능. 비교적 규모가 임베디드 시스템 구성.

#임베디드 시스템의 소프트웨어 구조 – 운영체제가 없는 경우
-일반적인 OS(operating system)가 없고 애플리케이션 소프트웨어가 하드웨어를 직접 제어하는 구조. 단순한 기능과 비교적 규모가 작은 임베디드 시스템의 구성

#임베디드 시스템의 특징
-고 신뢰성
-소형, 경량
-저전력
-실시간성
-가격에 민감
-특정 분야에 특화
-수행 기능 미리 정해짐

#실시간 시스템
- operation is time constrained: latency, throughput
- 주어진 입력에 대해 정해진 시간 내에 행동할 수 없을 때 문제가 발생하는 시스템
- 결과 산출에 걸리는 시간에도 적시성을 가지며 외부 자극에도 예측 가능한 방식으로 반응
#적시성 이란?
- 열약한 환경하에서도 데드라인 이내에 논리적으로도 정확한 출력 값을 산출해 내는 것.
#실시간 시스템 분류
- Hard real-time 시스템
-제어 작업이 deadline을 어기는 경우 시스템에 심각한 영향을 주는 time-critical 속성을 지닌 시스템
-예) 원자력 발전소 제어, 화재 발생 검출시스템, 항공기, 우주왕복선, 자동차 등
- soft real-time 시스템
-deadline을 어긴 단위 제어 작업의 무효화로 시스템의 평균적 성능에 미세한 영향을 주는 시스템
-예) 컴퓨터, 정보기기, 네트워크 관련기기 등

산업의 특성
. 고부가가치 산업
임베디드 소프트웨어가 탑재된 상품의 가치는 하드웨어보다 소프트웨어가 좌우하는 기술집약적 고부가가치 산업임.
통신 라우터의 경우, 하드웨어 원가가 수십 만원에 불과하나 각종 통신 및 제어 소프트웨어가 탑재되면 최종 가격이 수백만원으로 상승함

임베디드 시스템의 장점
. 시용 효율이 높다. : 임베디드 시스템은 특정 응용분야에 특화되어 있기 때문에 범용 시스템에 비해 성능 및 컴퓨팅 자원에 대한 사용 효율이 높다.
. 저비용, 고성능 및 시스템 유연성 측면에서 우수 : 특정 시스템을 구현함에 있어 전용 하드웨어를 사용하는 시스템이나 범용 컴퓨터를 사용하는 시스템에 비해 저비용 고성능 및 시스템 유연성 측면에서 우수하다.

임베디드 시스템의 단점
하드웨어/소프트웨어 혼재 -> 에러 소재파악의 어려움 -> 디버깅의 어려움
설계 공간의 확대 -> 다양한 설계 가능 -> 최적의 설계 예측의 어려움
하드웨어/소프트웨어 공조설계가 가능한 전문 개발 인력 부족

프로세서 선정 시 고려 사항
. 개발 하려는 제품의 특성
. 개발의 용이성, 가격, 안정성
. 제조회사의 지원 능력

다양한 프로세서들 비교

CPU
특징
ARM
간단한 명령어 사용하고, 개발 환경이 간단하다.
전력소모가 작아서 휴대폰이나 PDA같은 휴대 단말기에 많이 사용
MIPS
고속의 처리 능력, 고속 네트워크 장비등에 많이 사용
i386
오랜 기간의 사용으로 안정성 확보, PC와 동일한 개발 환경 구성
Power PC
강력한 네트워크 기능을 포함한 SOC

메모리 선정
코드 및 데이터 저장용 메모리(ROM)
. 저장할 코드 및 데이터의 크기, 속도 등에 따라 선정
. EEPROM : 소용량, 시스템 구동 중 코드나 데이터의 업데이트 거의 없는 경우
. NOR Flash : 저용량, 시스템 구동 중 코드나 데이터의 업데이트가 발생 하는 경우
. NAND Flash : 대용량, 시스템 구동 중 코드나 데이터의 업데이트가 빈번하게 발생하고 대용량의 데이터를 저장하는 경우에 사용

프로그램 구동 중에 사용되는 메모리(RAM)
. SDRAM : 시스템의 성능을 좌우하므로 빨라야 한다. 시스템의 기능에 따라 가격 대비 적합한 크기의 메모리를 선정한다.
주변 장치 선정
.시스템의 용도 및 특성에 맞는 주변 장치 선정
. LAN 무선 LAN
. LCD, Touch

소프트웨어 사양 결정
시스템의 사양 및 성능에 따른 소프트웨어 선정
OS 사용 여부 결정
. REAL-TIME의 필요성 고려
. 시스템 메모리의 크기 등에 따른 OS 선정
소프트웨어 개발
. 개발 시간, 난이도 및 비용에 따라 자체 개발
. 또는 외주 개발 결정
라이선스 조건
. 소프트웨어의 사용 권한 및 제한 사항 확인
. MPEG, MP3 등

임베디드 시스템에서의 운영체제 특징
. 시스템의 규모가 커짐에 따른 멀티 태스킹 기능 요구
. 네트워크나 멀티미디어 기능이 시스템의 기본 요소가 됨
. Networking, GUI, Audio, Video
. 리얼타임의 필요성이 부각됨
. 지능성이 부가되고, 기능이 많아지고, 복잡해짐
. 순차적인 프로그램 작성이 불가능하여 운영체제가 도입됨

임베디드 시스템용 운영체제 종류
. 상용 RTOS(Real-Time Os)
. 임베디드 Linux
. 임베디드 java
. 라즈베리

디바이스란?
임베디드 시스템에서의 디바이스란 컴퓨터에서 사용되는 모든 주변 기기를 의미한다.
네트워크 어댑터, LCD 디스플레이, Audio, 터미널, 키보드, 하드디스크, 플로피디스크, 프린터 등과 같은 입출력 장치들이 모두 디바이스이다.

드라이버란?
디바이스와 같은 장치들을 제어하고 관리하는 프로그램을 드라이버라 한다. 
OS에는 기본적으로 우리가 사용하는 모든 장치(모니터, 키보드, 마우스 등)에 대한 디바이스 드라이버가 설치되어 있기 때문에 쉽게 접근이 가능하다.
그러나 만약 내가 만든 장치라면 이것을 리눅스OS 사용하고 싶다면 리눅스 OS용 디바이스 드라이버를 직접 개발해야 한다.

디바이스 드라이버란?
필요한 디바이스와 디바이스의 스펙을 정한 후에는 어떤 부품을 쓸 것인지 선택하게 된다. 그런데 이런 하드웨어 부품을 동작 시키려면 이를 제어할 수 있는 소프트웨어가 있어야 하는데 바로 이 장치를 구동시키는 소프트웨어를 드라이버라고 말하지만 공식적으로 디바이스 드라이버라고 부른다.
디바이스 드라이버는 운영체제와 밀접하게 연관돼 동작한다.

애플리케이션(응용 프로그램)
. 시스템 (하드웨어와 OS)를 이용해서 어떠한 작업을 하는 것
. 워드, 게임 등의 모든 응용 프로그램

임베디드 시스템에서의 어플리케이션
. 특정한 작업을 처리하기 위해서 작성된다.

싱글 보드 컴퓨터의 정의

싱글 보드 컴퓨터란?
하나의 보드 위에 CPU 및 메모리, 입출력 장치를 장착한 하나의 컴퓨터이다.

장점 : 한 장의 보드로 구성되어 있기 때문에 관리하기 쉽고 성능대비 비교적 저렴하다.

임베디드 시스템의 개발 환경 특성
성능과 속도도 일반적인 PC 등과 비교해서 현저히 느린 경우가 많다. 일반적인 컴퓨터와 달리 입력과 출력 장치가 없는 경우가 많다. 모니터 등도 직접 연결할 수 없는 경우가 많다. 하드디스크다 없는 경우가 많다. 따라서 임베디드 시스템에서 작동하는 프로그램을 임베디드 시스템에서 직접 개발하기 어려운 경우가 많다.

이를 위해 일반적인 컴퓨터나 PC 등에서 개발한 후 그 결과만 임베디드 시스템에 보내어 임베디드 시스템에서 실행하는 방식을 택하고 있다.
-> 소프트웨어를 개발하는 시스템과 실행시키는 시스템이 다르다.

개발 툴 사용 방법을 정확히 숙지하고, 컴파일러에게 시스템 구성에 대해서 상세히 알려줘야 한다.
임베디드 시스템의 하드웨어 구성은 모두 다르다. 프로세서의 종류나 메모리의 크기와 종류, 연결된 주변기기들의 종류 등 구성이 동일하지 않으므로 컴파일러에서 자동으로 처리해줄 수 있는 부분이 많지 않다. 그래서 이러한 정보들을 컴파일러에 하나하나 설정해 주어야 한다.

임베디드 시스템 개발에 필요한 개발 환경 구성 요소

분류
내용
하드웨어 개발 환경
타겟 보드용 바이너리 실행 코드를 타겟 보드 내 탑재된 플래시 메모리에 저장하기 위한 환경
소프트웨어 개발 환경
타겟 보드용 소스 코드를 컴파일하기 위한 환경, 즉 타겟 보드용 설치 및 설정 환경
디버깅 개발 환경
타겟 보드의 하드웨어 적인 동작 상태를 점검하거나 타겟 보드의 동작 상태를 소프트웨어 적인 명령어로 지시하기 위한 환경

하드웨어 개발 환경
. PC와 타겟 보드를 연결할 별도의 케이블과 타겟 보드의 플래시 메모리에 실행 코드를 저장하기 위한 별도의 전용 소프트웨어 프로그램이 필요하다.

소프트웨어 개발 환경
. 터미널 에뮬레이터
erminal emulator를 사용하면 terminal software를 실행하는 컴퓨터에서 명령줄 또는 그래픽 인터페이스를 사용하여 원격 컴퓨터에 엑세스 하거나 원격 컴퓨터의 응용 프로그램을 실행할 수 있다.
인터넷 통신 기능이 없는 AVR Microcontroller는 terminal emulator와 시리얼포트를 이용한 serial 통신으로 접속하고 인터넷 통신 기능이 있는 raspberry pi는 terminal emulator와 ssh통신을 이용(telnet 등 다른 프로토콜을 사용할 수 있지만 보안 문제 등을 고려하여 현재는 ssh 프로토콜을 사용하는 것이 일반적임)하여 접속한다.
대표적 터미널 에뮬레이터로 windows용으로는 하이퍼터미널, linux용으로는 minicom이 있다. 최근에는 teraterm, putty 등 좀 더 다양한 접속 방법을 지원하는 터미널 에뮬레이터를 사용한다.
. Tool – chain
Toolchain이란 크로스 개발도구라 불리며, 임베디드 리눅스에서 동작하는 프로그램을 개발하는데 사용하는 도구이다.
패키지 종류
compiler : 소스 코드를 컴파일하는 역할을 담당
system library : 링킹 과정에 필요한 라이브러리를 제공
binutils : 컴파일이 끝난 이진 바이너리 파일에 대해 후 처리 작업 담당

Bootp 서버
. TCP/IP 상에서 자동 부팅을 위한 최초의 표준으로, 디스크 장치가 없는 클라이언트를 위한 프로토콜이다.

TFTP 서버
. FTP와 마찬가지로 파일을 전송하기 위한 프로토콜이지만, FTP보다 더 단순한 방식으로 파일을 전송한다. 따라서 데이터 전송 과정에서 데이터가 손실될 수 있는 등 불안정하다는 단점을 가지고 있다. 하지만 FTP처럼 복잡한 프로토콜을 사용하지 않기 때문에 구현이 간단하다. 임베디드 시스템에서 운영체제 업로드를 위해 주로 사용된다.

NFS 서버
. 네트워크 상에 연결된 다른 컴퓨터의 하드디스크를 내 컴퓨터의 하드디스크처럼 사용하는 것이다.

SSH
. secure shell의 약어
. 예전에는 텔넷이 주로 사용되었지만 이제 ssh가 주로 사용되고 있다.
. ssh는 텍스트 기반으로 원격자에 접속하기 위해 필요한 도구이다.
. ssh의 경우 파일 전송도 가능하기 때문에 파일 전송을 위해 별도의 ftp 서버를 설치 할 필요가 없다.
. ssh client 응용프로그램 예 : putty, teraterm, xshell

VNC
. virtual network computing의 약어
. 실제 콘솔 화면과 동일하게 가상의 데스크톱 화면을 보게 해주는 서븨스이다.
. telnet, ssh와 같은 cli환경과는 달리 그래픽이 지원되는 GUI환경이다.

테스트 및 디버깅 개발 환경
arm-linux-gdb
. 대부분의 상용 통합 개발 환경에는 디버거를 함께 제공하므로 따로 설치할 필요는 없으나 GNU 툴은 arm-linux-gdb를 설치해야 한다.

오실로스코프
. 임베디드 소프트웨어를 타겟 보드 플래시 메모리에 탑재하여 동작 상태를 점검하면서 타겟 보드를 디버깅하는 방법으로 오실로스코프라는 계측기를 사용하여 각 부품들의 신호 출력을 직접 확인하는 방법이 있다.

JTAG
. 프로세서 내부적인 하드웨어 동작 상태는 JTAG를 이용해 점검 및 확인할 수 있다. JTAG가 지원되는 칩들은 칩 내부에 있는 Boundary Scan Cell을 별도의 JTAG 장비를 통해 스캐닝하면서 칩 내부 상태를 점검해 볼 수 있다. 터의 하드디스크를 내 컴퓨터의 하드디스크처럼 사용하는 것이다.

